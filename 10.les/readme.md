## Вопросы
1. ### Базы данных. Принципы ACID, CAP-теорема   
   https://practicum.yandex.ru/blog/chto-takoe-bazy-dannyh/  
   https://nuancesprog.ru/p/14796/   
   https://www.c-sharpcorner.com/article/difference-between-cap-and-acid/   
   https://habr.com/ru/companies/alfa/articles/812417/  

**ACID** — это набор из четырёх требований к транзакционной системе, обеспечивающих максимально надёжную и предсказуемую работу. Расшифровывается как:   
* Атомарность. Гарантирует, что каждая транзакция выполняется по принципу «всё или ничего». Если какая-либо часть транзакции завершается с ошибкой, выполняется откат всей транзакции.
* Согласованность. Гарантирует, что транзакция переводит базу данных из одного допустимого состояния в другое, сохраняя неизменность базы данных.
* Изоляция. Гарантирует, что одновременно выполняемые транзакции не влияют на выполнение друг друга.
* Долговечность. Гарантирует, что после фиксации транзакции она остаётся таковой даже в случае сбоя системы.

**CAP-теорема** гласит, что в распределённой системе можно обеспечить только два свойства из трёх: согласованность, доступность и устойчивость к разделению. Помогает понимать, как конкретная распределённая система будет работать и чего от неё ожидать.


2. ### Нормализация и денормализация БД.   
   https://otus.ru/nest/post/1325/   
   https://habr.com/ru/companies/mvideo/articles/783386/   
   https://javarush.com/groups/posts/2902-sobesedovanie-razrabotchika-razbor-voprosov-po-bazam-dannihkh   
   https://www.youtube.com/watch?v=zqQxWdTpSIA

   **Нормализация** — это процесс организации данных в базе данных. Это включает создание таблиц и установление связей между этими таблицами в соответствии с правилами, предназначенными как для защиты данных, так и для того, чтобы сделать базу данных более гибкой за счет устранения избыточности и непоследовательной зависимости. Избыточные данные пустая трата дискового пространства и создает проблемы с обслуживанием.
   найдено на docs.microsoft.com


   **Денормализация**. Денормализация (англ. denormalization) — намеренное приведение структуры базы данных в состояние, не соответствующее критериям нормализации, обычно проводимое с целью ускорения операций чтения из базы за счет добавления избыточных данных. Основные сведения |. В разделе не хватает ссылок на источники. Информация должна быть проверяема, иначе она может быть удалена.


   Первая нормальная форма:
* В таблице не должно быть дублирующих строк
* В каждой ячейке таблицы хранится атомарноезначение(одно не составное значение)
* В столбце хранятся данные одного типа
* Отсутствуют массивы и списки в любом виде    
     

   Вторая нормальная форма:
* Таблица должна находится в первой нф
* Таблица должна иметь ключ
* Все неключевые столбцы таблицы должны зависеть от полного ключа(если ключ составной)
  (таблица должна иметь правильный ключ, по которому можно идентифицировать каждую строку)


   Третья нормальная форма:
* Таблица должна находится во второй нф
* В таблицах должна отсутствовать транзитивная зависимость(это когда неключевые столбцы зависят от значений других неключевых столбцов)
* Неключевые столбцы не должны пытаться играть роль ключа в таблице(таблица должна содержать правильные неключевые столбцы)

3. ### Типы СУБД (SQL / NoSQL), различные типы NoSQL-хранилищ.
    https://skillbox.ru/media/code/sql_i_nosql_in_i_yan_v_mire_baz_dannykh/?ysclid=m20qgstzo5464486308

#### Типы СУБД:

* Реляционные (SQL). Данные организованы в таблицы, каждая из которых имеет определённую структуру. Таблицы связаны друг с другом посредством отношений.
* Нереляционные (NoSQL). Данные хранятся в виде набора документов без определённой структуры и связей друг с другом.

#### Некоторые типы NoSQL-хранилищ:

* Хранилища, ориентированные на ключи и значения. База данных хранит данные без схемы в виде набора пар ключ-значение. Значение, которое может быть любым, ищется по ключу. Примеры хранилищ ключевых значений: DynamoDB и Riak.
* Хранилища, ориентированные на столбцы. В них данные хранятся в столбцах, а не в строках. Часто используются для хранилищ данных и аналитических приложений. Примеры: Cassandra и HBase.
* Хранилища документов. В таких базах данных NoSQL данные хранятся в документах. Документы могут быть структурированы любым способом, что делает их очень гибкими. Примеры: MongoDB и Couchbase.
* Графовые хранилища. Эти базы данных хранят данные в виде графовой структуры, с узлами и рёбрами, соединяющими данные. Часто используются в приложениях, которым необходимо анализировать сложные взаимосвязи. Примеры: Neo4j и OrientDB.
4. Транзакции. Распределенные транзакции. Паттерны 2PC, Saga.   
   https://gb.ru/blog/acid-cap-transactions/   
   https://habr.com/ru/articles/537594/   
   https://habr.com/ru/articles/769102/  
   https://www.geeksforgeeks.org/difference-between-saga-pattern-and-2-phase-commit-in-microservices/

**Распределённые транзакции** — это набор операций с данными, которые выполняются в разных сервисах. Такие транзакции сложнее обычных, потому что требуют согласованности действий и состояний независимых сервисов.

**Паттерн 2PC (Two-Phase Commit)** заключается в достижении консенсуса сервисами. Управляющий транзакциями сервис информирует сервисы о необходимости подготовиться к транзакции, и если все готовы — командует её выполнить. 2PC гарантирует, что одновременно может работать только одна служба. 

**Паттерн Saga** — это асинхронный шаблон, который не использует центральный контроллер, а обеспечивает взаимодействие между сервисами. Для связи между сервисами в Saga используется шина событий. Шина отправляет и получает запросы между сервисами, и каждый сервис создаёт локальную транзакцию, генерируя событие для получения другими службами. Первая служба, получившая событие, выполнит требуемое действие. Если этой службе не удаётся выполнить действие, оно отправляется другим службам. 

Как правило, 2PC используется для мгновенных транзакций, например в одной сети, а Saga — для длительных, например с участием внешних систем.


5. Индексы. Типы индексов в PostgreSQL   
   https://habr.com/ru/companies/ruvds/articles/724066/    
   https://selectel.ru/blog/tutorials/indexes-in-postgresql-and-create-index/?ysclid=m20qpsx2zs438827374   
   https://habr.com/ru/companies/otus/articles/747882/   

**Индекс в базе данных** — это объект, создаваемый с целью повышения производительности поиска данных. Он формируется из значений одного или нескольких столбцов таблицы и указателей на соответствующие строки таблицы, что позволяет базе данных быстро находить строки по конкретному запросу без необходимости сканирования всей таблицы.

**Существует два типа индексов:** кластерные и некластерные. При наличии кластерного индекса строки таблицы упорядочены по значению ключа этого индекса. Если в таблице нет кластерного индекса, некластерный индекс, созданный для такой таблицы, содержит только указатели на записи таблицы. Кластерный индекс может быть только одним для каждой таблицы, но каждая таблица может иметь несколько различных некластерных индексов, каждый из которых определяет свой собственный порядок следования записей.

**Некоторые популярные алгоритмы индексирования баз данных:**

* **B-дерево.** Используется для индексирования строковых или числовых данных. 
* **Bitmap-индекс.** Методика индексирования данных, использующая битовые карты для обозначения наличия или отсутствия значения в таблице. 
* **Хэш-индекс.** Применяется для таблиц с низкой кардинальностью, где количество уникальных значений в столбце довольно мало по сравнению с общим количеством строк. 
* **GiST (Generalized Search Tree, обобщённое поисковое дерево).** Используется для индексирования пространственных данных. 
* **Полнотекстовый индекс.** Применяется для повышения эффективности поиска текстовых запросов. В отличие от традиционных индексов, хранящих значения отдельных столбцов, полнотекстовый индекс хранит текстовое содержимое одного или нескольких столбцов как множества слов или токенов.

Для оптимальной производительности запросов индексы обычно создаются на тех столбцах таблицы, которые часто используются в запросах.


**PostgreSQL поддерживает несколько типов индексов:** B-дерево, xeш, GiST, SP-GiST, GIN, BRIN и расширение bloom. Каждый тип индекса использует свой алгоритм, который лучше всего подходит определённому типу индексируемых выражений. По умолчанию, команда CREATE INDEX создает индекс типа B-дерево, который эффективен в большинстве случаев.

## Практика
### Задание
Спроектировать БД для in-memory messanger
